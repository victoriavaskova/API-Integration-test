# ะกะตัะฒะธั ะะฝัะตะณัะฐัะธะธ ั ะะปะฐััะพัะผะพะน ะกัะฐะฒะพะบ

ะญัะพั ัะตัะฒะธั ัะฒะปัะตััั ะฑัะบะตะฝะด-ะบะพะผะฟะพะฝะตะฝัะพะผ, ะบะพัะพััะน ะฒััััะฟะฐะตั ะฒ ัะพะปะธ ะฟัะพะผะตะถััะพัะฝะพะณะพ ัะปะพั ะผะตะถะดั ะบะปะธะตะฝััะบะธะผะธ ะฟัะธะปะพะถะตะฝะธัะผะธ ะธ ะฒะฝะตัะฝะธะผ API ะฟะปะฐััะพัะผั ััะฐะฒะพะบ. ะะฝ ะพะฑะตัะฟะตัะธะฒะฐะตั ะฐััะตะฝัะธัะธะบะฐัะธั, ัะฟัะฐะฒะปะตะฝะธะต ะฟะพะปัะทะพะฒะฐัะตะปัะผะธ, ััะฐะฒะบะฐะผะธ, ะฑะฐะปะฐะฝัะพะผ, ะฐ ัะฐะบะถะต ะฟัะตะดะพััะฐะฒะปัะตั ัะฐััะธัะตะฝะฝัั ััะฝะบัะธะพะฝะฐะปัะฝะพััั, ัะฐะบัั ะบะฐะบ ะฐะดะผะธะฝ-ะฟะฐะฝะตะปั ะธ ะฝะฐะดะตะถะฝะพะต ััะฐะฝะตะฝะธะต ะดะฐะฝะฝัั.

## ๐ ะงัะพ ััะพ ัะฐะบะพะต?

ะัะพะตะบั ะฟะพัััะพะตะฝ ะฝะฐ ะพัะฝะพะฒะต ัะปะพะตะฝะพะน ะฐััะธัะตะบัััั (Layered Architecture), ััะพ ะพะฑะตัะฟะตัะธะฒะฐะตั ัะตัะบะพะต ัะฐะทะดะตะปะตะฝะธะต ะพัะฒะตัััะฒะตะฝะฝะพััะธ, ะฒััะพะบัั ะฟะพะดะดะตัะถะธะฒะฐะตะผะพััั ะธ ะผะฐัััะฐะฑะธััะตะผะพััั ะบะพะดะฐ.

### โจ ะัะฝะพะฒะฝัะต ะฒะพะทะผะพะถะฝะพััะธ

- **๐ ะะตะทะพะฟะฐัะฝะฐั ะฐััะตะฝัะธัะธะบะฐัะธั** - JWT ัะพะบะตะฝั ะธ ะทะฐัะธัะตะฝะฝัะต API
- **๐ฐ ะฃะฟัะฐะฒะปะตะฝะธะต ะฑะฐะปะฐะฝัะพะผ** - ะััะปะตะถะธะฒะฐะฝะธะต ััะตะดััะฒ ะฒ ัะตะฐะปัะฝะพะผ ะฒัะตะผะตะฝะธ
- **๐ฒ ะกะธััะตะผะฐ ััะฐะฒะพะบ** - ะะพะปะฝัะน ัะธะบะป ัะฐะทะผะตัะตะฝะธั ะธ ะพะฑัะฐะฑะพัะบะธ ััะฐะฒะพะบ
- **๐ ะััะพัะธั ะพะฟะตัะฐัะธะน** - ะะตัะฐะปัะฝะฐั ะธััะพัะธั ะฒัะตั ััะฐะฝะทะฐะบัะธะน
- **๐ก๏ธ ะะฐะดะตะถะฝะพััั** - ะะฑัะฐะฑะพัะบะฐ ะพัะธะฑะพะบ ะธ ะผะตัะฐะฝะธะทะผั ะฟะพะฒัะพัะฝัั ะฟะพะฟััะพะบ
- **๐ฑ Admin Panel** - ะะตะฑ-ะธะฝัะตััะตะนั ะดะปั ัะฟัะฐะฒะปะตะฝะธั ัะธััะตะผะพะน
- **๐ Production Ready** - Docker, ะผะพะฝะธัะพัะธะฝะณ, ะปะพะณะธัะพะฒะฐะฝะธะต

## ๐๏ธ ะััะธัะตะบัััะฐ ะฟัะพะตะบัะฐ

```
โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ
โ   Client App    โโโโโถโ  Backend API    โโโโโถโ  External API   โ
โ  (React/Vue)    โ    โ   (Express)     โ    โ  (Betting API)  โ
โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ
                                โ
                                โผ
                       โโโโโโโโโโโโโโโโโโโ
                       โ   PostgreSQL    โ
                       โ    Database     โ
                       โโโโโโโโโโโโโโโโโโโ
```

### ะัััััะน ััะฐัั:

### ะจะฐะณ 1: ะะปะพะฝะธัะพะฒะฐะฝะธะต ะฟัะพะตะบัะฐ

```bash
git clone <repository-url>
cd API-Integration-test
```

### ะจะฐะณ 2: ะะฐัััะพะนะบะฐ ะพะบััะถะตะฝะธั

```bash
# ะะพะฟะธััะตะผ ัะฐะนะป ะบะพะฝัะธะณััะฐัะธะธ
cp server/.env.example server/.env

# ะะตะดะฐะบัะธััะตะผ ัะฐะนะป server/.env - ัะบะฐะถะธัะต ะฒะฐัะธ ะดะฐะฝะฝัะต
```

### ะจะฐะณ 3: ะะฐะฟััะบ ั Docker (ัะตะบะพะผะตะฝะดัะตััั)

```bash
# ะะฐะฟััะบ ะฒัะตะน ัะธััะตะผั ะพะดะฝะพะน ะบะพะผะฐะฝะดะพะน
docker-compose up --build

# ะกะธััะตะผะฐ ะฑัะดะตั ะดะพัััะฟะฝะฐ ะฟะพ ะฐะดัะตัั:
# - API: http://localhost:3003
# - Swagger Docs: http://localhost:3003/api-docs
# - Admin Panel: http://localhost:3003/admin
```

### ะจะฐะณ 4: ะะฐัััะพะนะบะฐ ะฑะฐะทั ะดะฐะฝะฝัั

```bash
# ะัะธะผะตะฝัะตะผ ะผะธะณัะฐัะธะธ
docker-compose exec server npx prisma migrate deploy

# ะะฐะฟะพะปะฝัะตะผ ัะตััะพะฒัะผะธ ะดะฐะฝะฝัะผะธ
docker-compose exec server npm run db:seed
```

## ะขะตัะฝะพะปะพะณะธัะตัะบะธะน ััะตะบ

-   **ะคัะตะนะผะฒะพัะบ**: Express
-   **ะฏะทัะบ**: TypeScript
-   **ะะฐะทะฐ ะดะฐะฝะฝัั**: PostgreSQL
-   **ORM**: Prisma
-   **ะะพะฝัะตะนะฝะตัะธะทะฐัะธั**: Docker, Docker Compose
-   **ะะพะณะธัะพะฒะฐะฝะธะต**: Winston

## ะะฐะฟััะบ ะธ ะะฐะทะฒะตัััะฒะฐะฝะธะต

### ะขัะตะฑะพะฒะฐะฝะธั
-   Node.js v18+
-   Docker ะธ Docker Compose

### 1. ะะพะบะฐะปัะฝัะน ะทะฐะฟััะบ (ะดะปั ัะฐะทัะฐะฑะพัะบะธ)

**ะะฐัััะพะนะบะฐ ะพะบััะถะตะฝะธั:**

1.  ะกะบะพะฟะธััะนัะต ัะฐะนะป `.env.example` ะฒ `.env` ะฒ ะดะธัะตะบัะพัะธะธ `server/`:
    ```bash
    cp server/.env.example server/.env
    ```
2.  ะะฐะฟะพะปะฝะธัะต ะฟะตัะตะผะตะฝะฝัะต ะฒ `server/.env`. ะฃะบะฐะถะธัะต ะดะฐะฝะฝัะต ะดะปั ะฟะพะดะบะปััะตะฝะธั ะบ ะฒะฐัะตะน ะปะพะบะฐะปัะฝะพะน ะฑะฐะทะต ะดะฐะฝะฝัั PostgreSQL, ะฐ ัะฐะบะถะต `EXTERNAL_USER_ID` ะธ `EXTERNAL_SECRET_KEY` ะดะปั ะฒะฝะตัะฝะตะณะพ API.

## ๐ ะะพะบัะผะตะฝัะฐัะธั

- **๐ API ะะพะบัะผะตะฝัะฐัะธั**: http://localhost:3003/api-docs (Swagger UI)
- **๐ง ะขะตัะฝะธัะตัะบะฐั ะดะพะบัะผะตะฝัะฐัะธั**: [server/README.md](server/README.md)
- **๐๏ธ ะะฐะทะฐ ะดะฐะฝะฝัั**: [server/DATABASE_SETUP.md](server/DATABASE_SETUP.md)

## ๐งช ะขะตััะธัะพะฒะฐะฝะธะต

```bash
# ะะฐะฟััะบ ะฒัะตั ัะตััะพะฒ
npm test --prefix server

# ะะฐะฟััะบ ั ะฟะพะบัััะธะตะผ ะบะพะดะฐ
npm run test:coverage --prefix server

# ะะฐะฟััะบ ะฒ ัะตะถะธะผะต ะฝะฐะฑะปัะดะตะฝะธั
npm run test:watch --prefix server
```

## ๐ข ะกัััะบัััะฐ ะฟัะพะตะบัะฐ

```
API-Integration-test/
โโโ client/                 # Frontend ะฟัะธะปะพะถะตะฝะธะต (React)
โ   โโโ src/
โ   โ   โโโ pages/         # ะกััะฐะฝะธัั ะฟัะธะปะพะถะตะฝะธั
โ   โ   โโโ shared/        # ะะฑัะธะต ะบะพะผะฟะพะฝะตะฝัั
โ   โ   โโโ widgets/       # UI ะฒะธะดะถะตัั
โ   โโโ package.json
โโโ server/                # Backend API (Express + TypeScript)
โ   โโโ src/
โ   โ   โโโ controllers/   # HTTP ะบะพะฝััะพะปะปะตัั
โ   โ   โโโ services/      # ะะธะทะฝะตั-ะปะพะณะธะบะฐ
โ   โ   โโโ repositories/  # ะกะปะพะน ะดะฐะฝะฝัั
โ   โ   โโโ middleware/    # Express middleware
โ   โ   โโโ routes/        # API ะผะฐัััััั
โ   โโโ prisma/           # ะะฐะทะฐ ะดะฐะฝะฝัั
โ   โโโ tests/            # ะขะตััั
โโโ docker-compose.yml    # ะะพะฝัะธะณััะฐัะธั Docker
โโโ README.md            # ะญัะพั ัะฐะนะป
```

### ะะพะปะตะทะฝัะต ะบะพะผะฐะฝะดั

```bash
# ะะฐะทะฐ ะดะฐะฝะฝัั
npm run db:studio --prefix server     # Prisma Studio
npm run db:migrate --prefix server    # ะัะธะผะตะฝะธัั ะผะธะณัะฐัะธะธ
npm run db:seed --prefix server       # ะะฐะฟะพะปะฝะธัั ัะตััะพะฒัะผะธ ะดะฐะฝะฝัะผะธ

# ะะฐัะตััะฒะพ ะบะพะดะฐ
npm run lint --prefix server          # ะัะพะฒะตัะบะฐ ESLint
npm run type-check --prefix server    # ะัะพะฒะตัะบะฐ TypeScript
```


1.  **ะะฐัััะพะนะบะฐ ะพะบััะถะตะฝะธั:**
    -   ะฃะฑะตะดะธัะตัั, ััะพ ั ะฒะฐั ัะพะทะดะฐะฝ ะธ ะทะฐะฟะพะปะฝะตะฝ ัะฐะนะป `server/.env`, ะบะฐะบ ะพะฟะธัะฐะฝะพ ะฒััะต. `docker-compose` ะฑัะดะตั ะธัะฟะพะปัะทะพะฒะฐัั ะตะณะพ ะดะปั ะบะพะฝัะธะณััะฐัะธะธ ะบะพะฝัะตะนะฝะตัะพะฒ.
    -   ะฃะฑะตะดะธัะตัั, ััะพ Docker ะทะฐะฟััะตะฝ.

2.  **ะกะฑะพัะบะฐ ะธ ะทะฐะฟััะบ ะบะพะฝัะตะนะฝะตัะพะฒ:**
    ะัะฟะพะปะฝะธัะต ะบะพะผะฐะฝะดั ะฒ ะบะพัะฝะตะฒะพะน ะดะธัะตะบัะพัะธะธ ะฟัะพะตะบัะฐ:
    ```bash
    docker-compose up --build
    ```
    ะญัะฐ ะบะพะผะฐะฝะดะฐ ัะพะฑะตัะตั ะพะฑัะฐะท ะดะปั ัะตัะฒะตัะฐ, ัะบะฐัะฐะตั ะพะฑัะฐะท PostgreSQL ะธ ะทะฐะฟัััะธั ะพะฑะฐ ะบะพะฝัะตะนะฝะตัะฐ. ะงัะพะฑั ะทะฐะฟัััะธัั ะฒ ัะพะฝะพะฒะพะผ ัะตะถะธะผะต, ะดะพะฑะฐะฒััะต ัะปะฐะณ `-d`.

3.  **ะัะธะผะตะฝะตะฝะธะต ะผะธะณัะฐัะธะน ะฒ Docker:**
    ะะพะณะดะฐ ะบะพะฝัะตะนะฝะตัั ะทะฐะฟััะตะฝั, ะพัะบัะพะนัะต ะฝะพะฒัะน ัะตัะผะธะฝะฐะป ะธ ะฒัะฟะพะปะฝะธัะต:
    ```bash
    docker-compose exec server npx prisma migrate deploy
    ```

4.  **ะััะฐะฝะพะฒะบะฐ:**
    ะะปั ะพััะฐะฝะพะฒะบะธ ะบะพะฝัะตะนะฝะตัะพะฒ ะฒัะฟะพะปะฝะธัะต:
    ```bash
    docker-compose down
    ```
